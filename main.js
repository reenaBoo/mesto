(()=>{"use strict";function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var e=function(){function e(t,n,r,o,i,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this._text=t.name,this._image=t.link,this._cardSelector=n,this.likes=t.likes,this.cardId=t._id,this._ownerId=t.owner._id,this._handleCardClick=r,this._userId=a,this._handleCardLike=o.bind(this),this._handleCardDelete=i}var n,r;return n=e,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._cardImage=this._element.querySelector(".card__image"),this._cardTitle=this._element.querySelector(".card__title"),this._cardButtonDelete=this._element.querySelector(".card__delete-button"),this._cardButtonLike=this._element.querySelector(".card__like-button"),this._likeCounter=this._element.querySelector(".card__like-counter"),this._setEventListeners(),this._checkCardOwner(),this._cardImage.src=this._image,this._cardImage.alt=this._text,this._cardTitle.textContent=this._text,this.handleToggleLike(),this.setCounter(this.likes.length),this._element}},{key:"_checkCardOwner",value:function(){this._ownerId!==this._userId&&this._cardButtonDelete.remove()}},{key:"setCounter",value:function(t){this._likeCounter.textContent=t}},{key:"_setEventListeners",value:function(){var t=this;this._cardButtonLike.addEventListener("click",(function(){t._handleCardLike(t)})),this._cardButtonDelete.addEventListener("click",(function(){t._handleCardDelete(t)})),this._cardImage.addEventListener("click",(function(){t._handleCardClick()}))}},{key:"handleToggleLike",value:function(){this.isLiked()?this._cardButtonLike.classList.add("card__like-button_active"):this._cardButtonLike.classList.remove("card__like-button_active")}},{key:"removeElement",value:function(){this._element.remove()}},{key:"isLiked",value:function(){var t=this;return this.likes.some((function(e){return e._id===t._userId}))}}])&&t(n.prototype,r),e}();function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var r=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"changeButtonText",(function(t){r._submitButton.textContent=t})),this._inputSelector=e.inputSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=n,this._submitButton=this._form.querySelector(e.submitButtonSelector),this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector))}var e,r;return e=t,(r=[{key:"_showInputError",value:function(t){var e=this._form.querySelector(".".concat(t.id,"-error"));t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage,e.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(t){var e=this._form.querySelector(".".concat(t.id,"-error"));t.classList.remove(this._inputErrorClass),e.classList.remove(this._errorClass),e.textContent=""}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.setAttribute("disabled","true")):(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.removeAttribute("disabled"))}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"_setEventListener",value:function(){var t=this;this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListener()}},{key:"resetErrorText",value:function(){var t=this;this._inputList.forEach((function(e){t._hideInputError(e)})),this._toggleButtonState()}}])&&n(e.prototype,r),t}();function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=e,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"renderItems",value:function(t){var e=this;t.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(t){this._container.prepend(t)}},{key:"addItemAppend",value:function(t){this._container.append(t)}}])&&o(e.prototype,n),t}();function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"_handleEscClose",(function(t){"Escape"===t.key&&n.close()})),this._popup=document.querySelector(e)}var e,n;return e=t,(n=[{key:"open",value:function(){document.addEventListener("keydown",this._handleEscClose),this._popup.classList.add("popup_opened")}},{key:"close",value:function(){document.removeEventListener("keydown",this._handleEscClose),this._popup.classList.remove("popup_opened")}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("mousedown",(function(e){e.target.classList.contains("popup")&&t.close(t._popup)})),this._popup.addEventListener("click",(function(e){e.target.classList.contains("popup__close-button")&&t.close(t._popup)}))}}])&&a(e.prototype,n),t}();function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=p(r);if(o){var n=p(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t))._popupImage=e._popup.querySelector(".figure__image"),e._popupTitle=e._popup.querySelector(".figure__title"),e}return e=a,(n=[{key:"openImage",value:function(t,e){this._popupImage.src=e,this._popupImage.alt=t,this._popupTitle.textContent=t,l(p(a.prototype),"open",this).call(this)}}])&&s(e.prototype,n),a}(u);function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e,n){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=k(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(t,e){return!e||"object"!==d(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=k(r);if(o){var n=k(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return b(this,t)});function a(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t))._form=n._popup.querySelector(".form"),n._confirmButton=n._form.querySelector(".form__save-button"),n._handleSubmit=e,n}return e=a,(n=[{key:"_getInputValues",value:function(){var t=this;return this._inputsList=this._form.querySelectorAll(".form__input"),this._data={},this._inputsList.forEach((function(e){t._data[e.name]=e.value})),this._data}},{key:"setEventListeners",value:function(){var t=this;v(k(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault();var n=t._getInputValues();t._handleSubmit(n)}))}},{key:"close",value:function(){this._form.reset(),v(k(a.prototype),"close",this).call(this)}}])&&y(e.prototype,n),a}(u);function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var S=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._userName=e,this._userAbout=n,this._userAvatar=r,this._profileId=""}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this._userName.textContent,about:this._userAbout.textContent}}},{key:"setUserInfo",value:function(t,e,n){this._userName.textContent=t,this._userAbout.textContent=e,this._userId=n}},{key:"setUserAvatar",value:function(t){this._userAvatar.src=t}},{key:"getUserId",value:function(){return this._userId}}])&&w(e.prototype,n),t}();function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var C=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._cohort=e,this._url=n,this._token=r}var e,n;return e=t,(n=[{key:"_checkStatus",value:function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}},{key:"getInitialCards",value:function(){return fetch("".concat(this._url,"/").concat(this._cohort,"/cards"),{headers:{authorization:this._token}}).then(this._checkStatus)}},{key:"postNewCard",value:function(t,e){return fetch("".concat(this._url,"/").concat(this._cohort,"/cards"),{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:t,link:e})}).then(this._checkStatus)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._url,"/").concat(this._cohort,"/users/me"),{headers:{authorization:this._token}}).then(this._checkStatus)}},{key:"editUserInfo",value:function(t,e){return fetch("".concat(this._url,"/").concat(this._cohort,"/users/me"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:t,about:e})}).then(this._checkStatus)}},{key:"editUserAvatar",value:function(t){return fetch("".concat(this._url,"/").concat(this._cohort,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({avatar:t})}).then(this._checkStatus)}},{key:"likeCard",value:function(t){return fetch("".concat(this._url,"/").concat(this._cohort,"/cards/likes/").concat(t),{method:"PUT",headers:{authorization:this._token,"Content-Type":"application/json"}}).then(this._checkStatus)}},{key:"deleteLike",value:function(t){return fetch("".concat(this._url,"/").concat(this._cohort,"/cards/likes/").concat(t),{method:"DELETE",headers:{authorization:this._token,"Content-Type":"application/json"}}).then(this._checkStatus)}},{key:"deleteCard",value:function(t){return fetch("".concat(this._url,"/").concat(this._cohort,"/cards/").concat(t),{method:"DELETE",headers:{authorization:this._token,"Content-Type":"application/json"}}).then(this._checkStatus)}}])&&E(e.prototype,n),t}();function L(t){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function I(t,e,n){return(I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=P(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function j(t,e){return(j=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function T(t,e){return!e||"object"!==L(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var B=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&j(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=P(r);if(o){var n=P(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return T(this,t)});function a(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t))._form=n._popup.querySelector(".form"),n._handleSubmit=e,n}return e=a,(n=[{key:"setEventListeners",value:function(){var t=this;I(P(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._handleSubmit(t.card),t.close()}))}},{key:"close",value:function(){I(P(a.prototype),"close",this).call(this)}},{key:"open",value:function(t){I(P(a.prototype),"open",this).call(this),this.card=t}}])&&O(e.prototype,n),a}(u),x={inputSelector:".form__input",submitButtonSelector:".form__save-button",inactiveButtonClass:"form__save-button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"},q=document.querySelector(".profile__name"),R=document.querySelector(".profile__description"),A=document.querySelector(".profile__avatar"),U=document.querySelector(".form_type_user"),D=document.querySelector(".form_type_card"),N=document.querySelector(".form_type_avatar"),z=document.querySelector(".profile__edit-button"),V=document.querySelector(".profile__add-button"),J=document.querySelector(".profile__avatar-overlay");function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var M=new C("cohort-26","https://nomoreparties.co/v1/","254abe0c-6cde-4d88-b5b9-683b939cbbc8"),$=new _(".popup_type_image");$.setEventListeners();var F=new S(q,R,A);function G(t){F.setUserInfo(t.name,t.about,t._id)}function K(t){F.setUserAvatar(t.avatar)}function Q(){var t=this;(this.isLiked()?M.deleteLike(this.cardId):M.likeCard(this.cardId)).then((function(e){t.likes=e.likes,t.handleToggleLike(),t.setCounter(e.likes.length)}))}function W(){X.open(this)}var X=new B(".popup_type_delete",(function(t){M.deleteCard(t.cardId).then((function(e){"Пост удалён"===e.message&&t.removeElement()})).catch((function(t){return console.log(t)}))}));X.setEventListeners();var Y=function(t){return function(t){var n=F.getUserId();return new e(t,".template-card",(function(){$.openImage(t.name,t.link)}),Q,W,n)}(t).generateCard()},Z=new i((function(t){Z.addItemAppend(Y(t))}),".cards");Promise.all([M.getUserInfo(),M.getInitialCards()]).then((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,n)||function(t,e){if(t){if("string"==typeof t)return H(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];G(o),K(o);var a=F.getUserInfo();F.getUserId(),Z.renderItems(i);var u=new g(".popup_type_new-card",(function(t){et.changeButtonText("Создание..."),M.postNewCard(t.name,t.link).then((function(t){Z.addItem(Y(t)),u.close(),et.changeButtonText("Создать")})).catch((function(t){return console.log(t)}))}));u.setEventListeners();var c=new g(".popup_type_edit",(function(t){tt.changeButtonText("Сохранение..."),M.editUserInfo(t.name,t.about).then((function(){G(t),c.close(),tt.changeButtonText("Сохранить")})).catch((function(t){return console.log(t)}))}));c.setEventListeners();var s=new g(".popup_type_avatar",(function(t){nt.changeButtonText("Сохранение..."),M.editUserAvatar(t.avatar).then((function(){K(t),s.close(),nt.changeButtonText("Сохранить")})).catch((function(t){return console.log(t)}))}));s.setEventListeners(),z.addEventListener("click",(function(){U.name.value=a.name,U.about.value=a.about,tt.resetErrorText(),c.open()})),V.addEventListener("click",(function(){et.resetErrorText(),u.open()})),J.addEventListener("click",(function(){nt.resetErrorText(),s.open()}))})).catch((function(t){console.log(t)}));var tt=new r(x,U),et=new r(x,D),nt=new r(x,N);tt.enableValidation(),et.enableValidation(),nt.enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by13ZWJwYWNrLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by13ZWJwYWNrLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by13ZWJwYWNrLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by13ZWJwYWNrLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8td2VicGFjay8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLXdlYnBhY2svLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLXdlYnBhY2svLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by13ZWJwYWNrLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLXdlYnBhY2svLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhTdWJtaXQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8td2VicGFjay8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8td2VicGFjay8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJuYW1lcyI6WyJDYXJkIiwiZGF0YSIsInRlbXBsYXRlIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlQ2FyZExpa2UiLCJoYW5kbGVDYXJkRGVsZXRlIiwidXNlcklkIiwidGhpcyIsIl90ZXh0IiwibmFtZSIsIl9pbWFnZSIsImxpbmsiLCJfY2FyZFNlbGVjdG9yIiwibGlrZXMiLCJjYXJkSWQiLCJfaWQiLCJfb3duZXJJZCIsIm93bmVyIiwiX2hhbmRsZUNhcmRDbGljayIsIl91c2VySWQiLCJfaGFuZGxlQ2FyZExpa2UiLCJiaW5kIiwiX2hhbmRsZUNhcmREZWxldGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfY2FyZEltYWdlIiwiX2NhcmRUaXRsZSIsIl9jYXJkQnV0dG9uRGVsZXRlIiwiX2NhcmRCdXR0b25MaWtlIiwiX2xpa2VDb3VudGVyIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2NoZWNrQ2FyZE93bmVyIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJoYW5kbGVUb2dnbGVMaWtlIiwic2V0Q291bnRlciIsImxlbmd0aCIsInJlbW92ZSIsImxpa2VzTGVuZ3RoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImlzTGlrZWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJzb21lIiwibGlrZSIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtIiwidGV4dCIsIl9zdWJtaXRCdXR0b24iLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm0iLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JFbGVtZW50IiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiZm9yRWFjaCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfc2V0RXZlbnRMaXN0ZW5lciIsIlNlY3Rpb24iLCJyZW5kZXJlciIsImNvbnRhaW5lclNlbGVjdG9yIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIml0ZW1zQXJyYXkiLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJhcHBlbmQiLCJQb3B1cCIsInBvcHVwIiwiZXZ0Iiwia2V5IiwiY2xvc2UiLCJfcG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhJbWFnZSIsIl9wb3B1cEltYWdlIiwiX3BvcHVwVGl0bGUiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlU3VibWl0IiwiX2NvbmZpcm1CdXR0b24iLCJfaGFuZGxlU3VibWl0IiwiX2lucHV0c0xpc3QiLCJfZGF0YSIsImlucHV0IiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiVXNlckluZm8iLCJ1c2VyTmFtZSIsInVzZXJBYm91dCIsInVzZXJBdmF0YXIiLCJfdXNlck5hbWUiLCJfdXNlckFib3V0IiwiX3VzZXJBdmF0YXIiLCJfcHJvZmlsZUlkIiwiYWJvdXQiLCJuYW1lVXBkYXRlIiwiYWJvdXRVcGRhdGUiLCJhdmF0YXJVcGRhdGUiLCJBcGkiLCJjb2hvcnQiLCJ1cmwiLCJ0b2tlbiIsIl9jb2hvcnQiLCJfdXJsIiwiX3Rva2VuIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJ0aGVuIiwiX2NoZWNrU3RhdHVzIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhdmF0YXIiLCJQb3B1cFdpdGhTdWJtaXQiLCJjYXJkIiwib2JqIiwidXNlckpvYiIsInVzZXJGb3JtIiwiY2FyZEZvcm0iLCJhdmF0YXJGb3JtIiwiZWRpdFByb2ZpbGVCdXR0b24iLCJhZGRDYXJkQnV0dG9uIiwiYXZhdGFyT3ZlcmxheSIsImFwaSIsInBvcHVwV2l0aEltYWdlIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ1c2VyRGF0YSIsImhhbmRsZVVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJoYW5kbGVVc2VyQXZhdGFyIiwic2V0VXNlckF2YXRhciIsImRlbGV0ZUxpa2UiLCJsaWtlQ2FyZCIsInJlc3BvbnNlIiwicG9wdXBEZWxldGUiLCJvcGVuIiwiZGVsZXRlQ2FyZCIsIm1lc3NhZ2UiLCJyZW1vdmVFbGVtZW50IiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwicmVuZGVyQ2FyZCIsImdldFVzZXJJZCIsIm9wZW5JbWFnZSIsImNyZWF0ZUNhcmQiLCJnZW5lcmF0ZUNhcmQiLCJyZW5kZXJDYXJkcyIsImFkZEl0ZW1BcHBlbmQiLCJhbGwiLCJnZXRVc2VySW5mbyIsImdldEluaXRpYWxDYXJkcyIsImFwaURhdGEiLCJjYXJkc0RhdGEiLCJjdXJyZW50VXNlckluZm8iLCJyZW5kZXJJdGVtcyIsInBvcHVwQWRkQ2FyZCIsImRhdGFDYXJkIiwiY2FyZFZhbGlkYXRlIiwiY2hhbmdlQnV0dG9uVGV4dCIsInBvc3ROZXdDYXJkIiwiYWRkSXRlbSIsInBvcHVwVXNlciIsInVzZXJJbmZvIiwidXNlclZhbGlkYXRlIiwiZWRpdFVzZXJJbmZvIiwicG9wdXBBdmF0YXIiLCJhdmF0YXJWYWxpZGF0ZSIsImVkaXRVc2VyQXZhdGFyIiwicmVzZXRFcnJvclRleHQiLCJlbmFibGVWYWxpZGF0aW9uIl0sIm1hcHBpbmdzIjoieUxBQU8sSUFBTUEsRUFBYixXQUNFLFdBQVlDLEVBQU1DLEVBQVVDLEVBQWlCQyxFQUFnQkMsRUFBa0JDLEksNEZBQVEsU0FDckZDLEtBQUtDLE1BQVFQLEVBQUtRLEtBQ2xCRixLQUFLRyxPQUFTVCxFQUFLVSxLQUNuQkosS0FBS0ssY0FBZ0JWLEVBQ3JCSyxLQUFLTSxNQUFRWixFQUFLWSxNQUNsQk4sS0FBS08sT0FBU2IsRUFBS2MsSUFDbkJSLEtBQUtTLFNBQVdmLEVBQUtnQixNQUFNRixJQUMzQlIsS0FBS1csaUJBQW1CZixFQUN4QkksS0FBS1ksUUFBVWIsRUFDZkMsS0FBS2EsZ0JBQWtCaEIsRUFBZWlCLEtBQUtkLE1B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QUVoQ2lCLEVBQWFoQyxvQkFHYixJQUFNc0MsRUFBWSxJQUFJaEcsRUFBYyxvQkFBb0IsU0FBQ2lHLEdBQ3ZEQyxHQUFhTCxpQkFBaUIsaUJBQzlCckMsRUFBSTJDLGFBQWFGLEVBQVNuTSxLQUFNbU0sRUFBUzlFLE9BQ3RDb0IsTUFBSyxXQUNKcUIsRUFBZXFDLEdBQ2ZELEVBQVV6RyxRQUNWMkcsR0FBYUwsaUJBQWlCLGdCQUUvQnJCLE9BQU0sU0FBQ0MsR0FBRCxPQUFTQyxRQUFRQyxJQUFJRixTQUVoQ3VCLEVBQVV0QyxvQkFHVixJQUFNMEMsRUFBYyxJQUFJcEcsRUFBYyxzQkFBc0IsU0FBQ2lHLEdBQzNESSxHQUFlUixpQkFBaUIsaUJBQ2hDckMsRUFBSThDLGVBQWVMLEVBQVNwRCxRQUN6Qk4sTUFBSyxXQUNKdUIsRUFBaUJtQyxHQUNqQkcsRUFBWTdHLFFBQ1o4RyxHQUFlUixpQkFBaUIsZ0JBRWpDckIsT0FBTSxTQUFDQyxHQUFELE9BQVNDLFFBQVFDLElBQUlGLFNBRWhDMkIsRUFBWTFDLG9CQUdaTCxtQkFBbUMsU0FBUyxXQUMxQ0gsYUFBc0JzQyxFQUFnQjFMLEtBQ3RDb0osY0FBdUJzQyxFQUFnQnJFLE1BQ3ZDK0UsR0FBYUssaUJBQ2JQLEVBQVU1QixVQUdaZCxtQkFBK0IsU0FBUyxXQUN0Q3NDLEdBQWFXLGlCQUNiYixFQUFhdEIsVUFHZmIsbUJBQStCLFNBQVMsV0FDdEM4QyxHQUFlRSxpQkFDZkgsRUFBWWhDLGFBSWZJLE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSUYsTUFJaEIsSUFBTXlCLEdBQWUsSUFBSTNKLEVBQWN5RyxFQUFLRSxHQUN0QzBDLEdBQWUsSUFBSXJKLEVBQWN5RyxFQUFLRyxHQUN0Q2tELEdBQWlCLElBQUk5SixFQUFjeUcsRUFBS0ksR0FFOUM4QyxHQUFhTSxtQkFDYlosR0FBYVksbUJBQ2JILEdBQWVHLG9CIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoZGF0YSwgdGVtcGxhdGUsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlQ2FyZExpa2UsIGhhbmRsZUNhcmREZWxldGUsIHVzZXJJZCkge1xyXG4gICAgdGhpcy5fdGV4dCA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2ltYWdlID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gdGVtcGxhdGU7XHJcbiAgICB0aGlzLmxpa2VzID0gZGF0YS5saWtlcztcclxuICAgIHRoaXMuY2FyZElkID0gZGF0YS5faWQ7XHJcbiAgICB0aGlzLl9vd25lcklkID0gZGF0YS5vd25lci5faWQ7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkTGlrZSA9IGhhbmRsZUNhcmRMaWtlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkRGVsZXRlID0gaGFuZGxlQ2FyZERlbGV0ZTtcclxuICB9O1xyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAuY29udGVudFxyXG4gICAgLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkJylcclxuICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICBcclxuICAvLyDQstC10YDQvdGR0LwgRE9NLdGN0LvQtdC80LXQvdGCINC60LDRgNGC0L7Rh9C60LhcclxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICB9O1xyXG5cclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICAvLyDQl9Cw0L/QuNGI0LXQvCDRgNCw0LfQvNC10YLQutGDINCyINC/0YDQuNCy0LDRgtC90L7QtSDQv9C+0LvQtSBfZWxlbWVudC4gXHJcbiAgICAvLyDQotCw0Log0YMg0LTRgNGD0LPQuNGFINGN0LvQtdC80LXQvdGC0L7QsiDQv9C+0Y/QstC40YLRgdGPINC00L7RgdGC0YPQvyDQuiDQvdC10LkuXHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2ltYWdlJyk7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190aXRsZScpO1xyXG4gICAgdGhpcy5fY2FyZEJ1dHRvbkRlbGV0ZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2RlbGV0ZS1idXR0b24nKTtcclxuICAgIHRoaXMuX2NhcmRCdXR0b25MaWtlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZS1idXR0b24nKTtcclxuICAgIHRoaXMuX2xpa2VDb3VudGVyID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZS1jb3VudGVyJyk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fY2hlY2tDYXJkT3duZXIoKTtcclxuICBcclxuICAgIC8vINCU0L7QsdCw0LLQuNC8INC00LDQvdC90YvQtVxyXG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2ltYWdlO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX3RleHQ7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl90ZXh0O1xyXG4gICAgdGhpcy5oYW5kbGVUb2dnbGVMaWtlKCk7XHJcbiAgICB0aGlzLnNldENvdW50ZXIodGhpcy5saWtlcy5sZW5ndGgpO1xyXG4gIFxyXG4gICAgLy8g0JLQtdGA0L3RkdC8INGN0LvQtdC80LXQvdGCINC90LDRgNGD0LbRg1xyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfTtcclxuXHJcbiAgX2NoZWNrQ2FyZE93bmVyKCkge1xyXG4gICAgICBpZih0aGlzLl9vd25lcklkICE9PSB0aGlzLl91c2VySWQpIHtcclxuICAgICAgdGhpcy5fY2FyZEJ1dHRvbkRlbGV0ZS5yZW1vdmUoKTtcclxuXHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgc2V0Q291bnRlcihsaWtlc0xlbmd0aCkge1xyXG4gICAgdGhpcy5fbGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSBsaWtlc0xlbmd0aDtcclxuICB9O1xyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jYXJkQnV0dG9uTGlrZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlQ2FyZExpa2UodGhpcyk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2NhcmRCdXR0b25EZWxldGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmREZWxldGUodGhpcyk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKCk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBoYW5kbGVUb2dnbGVMaWtlKCkgeyAgICBcclxuICAgIGlmKHRoaXMuaXNMaWtlZCgpKSB7XHJcbiAgICAgIHRoaXMuX2NhcmRCdXR0b25MaWtlLmNsYXNzTGlzdC5hZGQoJ2NhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZScpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fY2FyZEJ1dHRvbkxpa2UuY2xhc3NMaXN0LnJlbW92ZSgnY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlJyk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgcmVtb3ZlRWxlbWVudCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgfTtcclxuXHJcbiAgaXNMaWtlZCgpIHtcclxuICAgIHJldHVybiB0aGlzLmxpa2VzLnNvbWUobGlrZSA9PiB7XHJcbiAgICAgIHJldHVybiBsaWtlLl9pZCA9PT0gdGhpcy5fdXNlcklkO1xyXG4gICAgfSk7XHJcbiAgfTtcclxufTsiLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtKSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XHJcbiAgICBcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XHJcbiAgICBcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSk7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9O1xyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG4gIH07XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAndHJ1ZScpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVyKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcigpO1xyXG4gIH07XHJcblxyXG4gIHJlc2V0RXJyb3JUZXh0KCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gIH07XHJcblxyXG4gIGNoYW5nZUJ1dHRvblRleHQgPSAodGV4dCkgPT4ge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGV4dDtcclxuICB9XHJcbn07IiwiZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHJlbmRlcmVyLCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoaXRlbXNBcnJheSkge1xyXG4gICAgaXRlbXNBcnJheS5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW1BcHBlbmQoZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwKSB7XHJcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXApO1xyXG4gIH07XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XHJcbiAgfTtcclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XHJcbiAgfTtcclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH07XHJcbiAgfTtcclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXAnKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UodGhpcy5fcG9wdXApO1xyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2Nsb3NlLWJ1dHRvbicpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSh0aGlzLl9wb3B1cCk7XHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuICB9O1xyXG59IiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXApIHtcclxuICAgIHN1cGVyKHBvcHVwKTtcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcuZmlndXJlX19pbWFnZScpO1xyXG4gICAgdGhpcy5fcG9wdXBUaXRsZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5maWd1cmVfX3RpdGxlJyk7XHJcbiAgfVxyXG5cclxuICBvcGVuSW1hZ2UobmFtZSwgbGluaykge1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBuYW1lO1xyXG4gICAgdGhpcy5fcG9wdXBUaXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59IiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cCwgaGFuZGxlU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cCk7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLmZvcm0nKTtcclxuICAgIHRoaXMuX2NvbmZpcm1CdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19zYXZlLWJ1dHRvbicpO1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0O1xyXG4gIH07XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIHRoaXMuX2lucHV0c0xpc3QgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtX19pbnB1dCcpO1xyXG4gICAgdGhpcy5fZGF0YSA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRzTGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICB0aGlzLl9kYXRhW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB0aGlzLl9kYXRhO1xyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgY29uc3QgZGF0YSA9IHRoaXMuX2dldElucHV0VmFsdWVzKCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdChkYXRhKTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICB9O1xyXG59IiwiZXhwb3J0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih1c2VyTmFtZSwgdXNlckFib3V0LCB1c2VyQXZhdGFyKSB7XHJcbiAgICB0aGlzLl91c2VyTmFtZSA9IHVzZXJOYW1lO1xyXG4gICAgdGhpcy5fdXNlckFib3V0ID0gdXNlckFib3V0O1xyXG4gICAgdGhpcy5fdXNlckF2YXRhciA9IHVzZXJBdmF0YXI7XHJcbiAgICB0aGlzLl9wcm9maWxlSWQgPSAnJztcclxuICB9O1xyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50LFxyXG4gICAgICBhYm91dDogdGhpcy5fdXNlckFib3V0LnRleHRDb250ZW50XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhuYW1lVXBkYXRlLCBhYm91dFVwZGF0ZSwgX2lkKSB7XHJcbiAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IG5hbWVVcGRhdGU7XHJcbiAgICB0aGlzLl91c2VyQWJvdXQudGV4dENvbnRlbnQgPSBhYm91dFVwZGF0ZTtcclxuICAgIHRoaXMuX3VzZXJJZCA9IF9pZDtcclxuICB9XHJcblxyXG4gIHNldFVzZXJBdmF0YXIoYXZhdGFyVXBkYXRlKSB7XHJcbiAgICB0aGlzLl91c2VyQXZhdGFyLnNyYyA9IGF2YXRhclVwZGF0ZTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl91c2VySWQ7XHJcbiAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoY29ob3J0LCB1cmwsIHRva2VuKSB7XHJcbiAgICB0aGlzLl9jb2hvcnQgPSBjb2hvcnQ7XHJcbiAgICB0aGlzLl91cmwgPSB1cmw7XHJcbiAgICB0aGlzLl90b2tlbiA9IHRva2VuO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrU3RhdHVzKHJlcykgeyAgICBcclxuICAgICAgaWYocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH1cclxuXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vJHt0aGlzLl9jb2hvcnR9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW5cclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIC50aGVuKHRoaXMuX2NoZWNrU3RhdHVzKVxyXG4gIH1cclxuXHJcbiAgcG9zdE5ld0NhcmQobmFtZSwgbGluaykge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vJHt0aGlzLl9jb2hvcnR9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuLFxyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgbGluazogbGlua1xyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICAgIC50aGVuKHRoaXMuX2NoZWNrU3RhdHVzKVxyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS8ke3RoaXMuX2NvaG9ydH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlblxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgLnRoZW4odGhpcy5fY2hlY2tTdGF0dXMpXHJcbiAgfVxyXG5cclxuICBlZGl0VXNlckluZm8obmFtZSwgYWJvdXQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9LyR7dGhpcy5fY29ob3J0fS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBhYm91dDogYWJvdXRcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgICAudGhlbih0aGlzLl9jaGVja1N0YXR1cylcclxuICB9XHJcblxyXG4gIGVkaXRVc2VyQXZhdGFyKGF2YXRhcikge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vJHt0aGlzLl9jb2hvcnR9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgYXZhdGFyOiBhdmF0YXJcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgICAudGhlbih0aGlzLl9jaGVja1N0YXR1cylcclxuICB9XHJcblxyXG4gIGxpa2VDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vJHt0aGlzLl9jb2hvcnR9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuLFxyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIC50aGVuKHRoaXMuX2NoZWNrU3RhdHVzKVxyXG4gIH1cclxuXHJcbiAgZGVsZXRlTGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9LyR7dGhpcy5fY29ob3J0fS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICAudGhlbih0aGlzLl9jaGVja1N0YXR1cylcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS8ke3RoaXMuX2NvaG9ydH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgLnRoZW4odGhpcy5fY2hlY2tTdGF0dXMpXHJcbiAgfVxyXG59IiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aFN1Ym1pdCBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cCwgaGFuZGxlU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cCk7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLmZvcm0nKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcclxuICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCh0aGlzLmNhcmQpO1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgfTtcclxuXHJcbiAgb3BlbihjYXJkKSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB0aGlzLmNhcmQgPSBjYXJkO1xyXG4gIH07XHJcbn0iLCJleHBvcnQge29iaiwgdXNlckZvcm0sIGNhcmRGb3JtLCBhdmF0YXJGb3JtLCBlZGl0UHJvZmlsZUJ1dHRvbiwgYWRkQ2FyZEJ1dHRvbiwgYXZhdGFyT3ZlcmxheSwgdXNlck5hbWUsIHVzZXJKb2IsIHVzZXJBdmF0YXJ9O1xyXG5cclxuY29uc3Qgb2JqID0gKHtcclxuICBpbnB1dFNlbGVjdG9yOiAnLmZvcm1fX2lucHV0JyxcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5mb3JtX19zYXZlLWJ1dHRvbicsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogJ2Zvcm1fX3NhdmUtYnV0dG9uX2Rpc2FibGVkJyxcclxuICBpbnB1dEVycm9yQ2xhc3M6ICdmb3JtX19pbnB1dF90eXBlX2Vycm9yJyxcclxuICBlcnJvckNsYXNzOiAnZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlJ1xyXG59KTtcclxuXHJcbmNvbnN0IHVzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX25hbWUnKTtcclxuY29uc3QgdXNlckpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19kZXNjcmlwdGlvbicpO1xyXG5jb25zdCB1c2VyQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhcicpO1xyXG5cclxuY29uc3QgdXNlckZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV90eXBlX3VzZXInKTtcclxuY29uc3QgY2FyZEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV90eXBlX2NhcmQnKTtcclxuY29uc3QgYXZhdGFyRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX3R5cGVfYXZhdGFyJyk7XHJcblxyXG5jb25zdCBlZGl0UHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpO1xyXG5jb25zdCBhZGRDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcclxuY29uc3QgYXZhdGFyT3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXItb3ZlcmxheScpOyIsImltcG9ydCB7Q2FyZH0gZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcclxuaW1wb3J0IHtGb3JtVmFsaWRhdG9yfSBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xyXG5pbXBvcnQge1NlY3Rpb259IGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XHJcbmltcG9ydCB7UG9wdXBXaXRoSW1hZ2V9IGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xyXG5pbXBvcnQge1BvcHVwV2l0aEZvcm19IGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XHJcbmltcG9ydCB7VXNlckluZm99IGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xyXG5pbXBvcnQge0FwaX0gZnJvbSAnLi4vY29tcG9uZW50cy9BcGkuanMnO1xyXG5pbXBvcnQge1BvcHVwV2l0aFN1Ym1pdH0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhTdWJtaXQuanMnO1xyXG5pbXBvcnQge29iaiwgdXNlckZvcm0sIGNhcmRGb3JtLCBhdmF0YXJGb3JtLCBlZGl0UHJvZmlsZUJ1dHRvbiwgYWRkQ2FyZEJ1dHRvbiwgYXZhdGFyT3ZlcmxheSwgdXNlck5hbWUsIHVzZXJKb2IsIHVzZXJBdmF0YXJ9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XHJcbmltcG9ydCAnLi9pbmRleC5jc3MnO1xyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSgnY29ob3J0LTI2JywgJ2h0dHBzOi8vbm9tb3JlcGFydGllcy5jby92MS8nLCAnMjU0YWJlMGMtNmNkZS00ZDg4LWI1YjktNjgzYjkzOWNiYmM4Jyk7XHJcblxyXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLnBvcHVwX3R5cGVfaW1hZ2UnKTtcclxucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHVzZXJEYXRhID0gbmV3IFVzZXJJbmZvKHVzZXJOYW1lLCB1c2VySm9iLCB1c2VyQXZhdGFyKTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVVzZXJJbmZvIChkYXRhKSB7XHJcbiAgdXNlckRhdGEuc2V0VXNlckluZm8oZGF0YS5uYW1lLCBkYXRhLmFib3V0LCBkYXRhLl9pZCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVVzZXJBdmF0YXIoZGF0YSkge1xyXG4gIHVzZXJEYXRhLnNldFVzZXJBdmF0YXIoZGF0YS5hdmF0YXIpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmRMaWtlKCkge1xyXG4gIGNvbnN0IGNhcmRBcnIgPSB0aGlzLmlzTGlrZWQoKSA/IGFwaS5kZWxldGVMaWtlKHRoaXMuY2FyZElkKSA6IGFwaS5saWtlQ2FyZCh0aGlzLmNhcmRJZCk7XHJcbiAgY2FyZEFyci50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgdGhpcy5saWtlcyA9IHJlc3BvbnNlLmxpa2VzO1xyXG4gICAgdGhpcy5oYW5kbGVUb2dnbGVMaWtlKCk7XHJcbiAgICB0aGlzLnNldENvdW50ZXIocmVzcG9uc2UubGlrZXMubGVuZ3RoKTtcclxuICB9KVxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDYXJkRGVsZXRlKCkge1xyXG4gIHBvcHVwRGVsZXRlLm9wZW4odGhpcyk7XHJcbn1cclxuXHJcbmNvbnN0IHBvcHVwRGVsZXRlID0gbmV3IFBvcHVwV2l0aFN1Ym1pdCgnLnBvcHVwX3R5cGVfZGVsZXRlJywgKGNhcmQpID0+IHtcclxuICBhcGkuZGVsZXRlQ2FyZChjYXJkLmNhcmRJZClcclxuICAudGhlbigocmVzKSA9PiB7XHJcbiAgICBpZiAocmVzLm1lc3NhZ2UgPT09IFwi0J/QvtGB0YIg0YPQtNCw0LvRkdC9XCIpIHtcclxuICAgICAgY2FyZC5yZW1vdmVFbGVtZW50KCk7XHJcbiAgICB9XHJcbiAgfSkgIFxyXG4gIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gIH0pO1xyXG5wb3B1cERlbGV0ZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLdGE0YPQvdC60YbQuNC4INC00LvRjyDRgdCx0L7RgNC60Lgg0LrQsNGA0YLQvtGH0LXQui0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbmNvbnN0IGNyZWF0ZUNhcmQgPSAoaXRlbSkgPT4ge1xyXG4gIGNvbnN0IHVzZXJJZCA9IHVzZXJEYXRhLmdldFVzZXJJZCgpO1xyXG4gIHJldHVybiBuZXcgQ2FyZChpdGVtLCAnLnRlbXBsYXRlLWNhcmQnLCBcclxuICBmdW5jdGlvbiBoYW5kbGVDYXJkQ2xpY2soKSB7cG9wdXBXaXRoSW1hZ2Uub3BlbkltYWdlKGl0ZW0ubmFtZSwgaXRlbS5saW5rKX0sIFxyXG4gIGhhbmRsZUNhcmRMaWtlLCBcclxuICBoYW5kbGVDYXJkRGVsZXRlLCBcclxuICB1c2VySWQpOyAgXHJcbn07XHJcblxyXG5jb25zdCByZW5kZXJDYXJkID0gKGl0ZW0pID0+IHtcclxuICByZXR1cm4gY3JlYXRlQ2FyZChpdGVtKS5nZW5lcmF0ZUNhcmQoKTtcclxufTtcclxuXHJcbmNvbnN0IHJlbmRlckNhcmRzID0gbmV3IFNlY3Rpb24oXHJcbiAgZnVuY3Rpb24gcmVuZGVyZXIoaXRlbSkgeyAgICAgIFxyXG4gICAgcmVuZGVyQ2FyZHMuYWRkSXRlbUFwcGVuZChyZW5kZXJDYXJkKGl0ZW0pKTtcclxuICB9LCBcclxuICAnLmNhcmRzJyk7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1BUEktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5Qcm9taXNlLmFsbChbYXBpLmdldFVzZXJJbmZvKCksIGFwaS5nZXRJbml0aWFsQ2FyZHMoKV0pXHJcbiAgLnRoZW4oKFthcGlEYXRhLCBjYXJkc0RhdGFdKSA9PiB7XHJcbiAgICAvLy0tLS0tLS0tLS0tLS0t0LfQsNC/0L7Qu9C90LXQvdC40LUg0L/RgNC+0YTQuNC70Y8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIGhhbmRsZVVzZXJJbmZvKGFwaURhdGEpO1xyXG4gICAgaGFuZGxlVXNlckF2YXRhcihhcGlEYXRhKTtcclxuXHJcbiAgICBjb25zdCBjdXJyZW50VXNlckluZm8gPSB1c2VyRGF0YS5nZXRVc2VySW5mbygpO1xyXG4gICAgdXNlckRhdGEuZ2V0VXNlcklkKCk7XHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLdGA0LXQvdC00LXRgCDQutCw0YDRgtC+0YfQtdC6LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIHJlbmRlckNhcmRzLnJlbmRlckl0ZW1zKGNhcmRzRGF0YSk7XHJcblxyXG4gICAgLy8tLS0tLS0tLS3QtNC+0LHQsNCy0LvQtdC90LjQtSDQutCw0YDRgtC+0YfQutC4INC90LAg0YHQtdGA0LLQtdGALS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICBjb25zdCBwb3B1cEFkZENhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX3R5cGVfbmV3LWNhcmQnLCAoZGF0YUNhcmQpID0+IHtcclxuICAgICAgY2FyZFZhbGlkYXRlLmNoYW5nZUJ1dHRvblRleHQoJ9Ch0L7Qt9C00LDQvdC40LUuLi4nKTtcclxuICAgICAgYXBpLnBvc3ROZXdDYXJkKGRhdGFDYXJkLm5hbWUsIGRhdGFDYXJkLmxpbmspXHJcbiAgICAgICAgLnRoZW4oKGRhdGEpID0+IHsgXHJcbiAgICAgICAgICByZW5kZXJDYXJkcy5hZGRJdGVtKHJlbmRlckNhcmQoZGF0YSkpO1xyXG4gICAgICAgICAgcG9wdXBBZGRDYXJkLmNsb3NlKCk7XHJcbiAgICAgICAgICBjYXJkVmFsaWRhdGUuY2hhbmdlQnV0dG9uVGV4dCgn0KHQvtC30LTQsNGC0YwnKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gICAgfSk7XHJcbiAgICBwb3B1cEFkZENhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICAvLy0tLS0tLS0tLS3QtNC+0LHQsNCy0LvQtdC90LjQtSDQtNCw0L3QvdGL0YUg0L/RgNC+0YTQuNC70Y8g0L3QsCDRgdC10YDQstC10YAtLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgY29uc3QgcG9wdXBVc2VyID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF90eXBlX2VkaXQnLCAodXNlckluZm8pID0+IHtcclxuICAgICAgdXNlclZhbGlkYXRlLmNoYW5nZUJ1dHRvblRleHQoJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJyk7XHJcbiAgICAgIGFwaS5lZGl0VXNlckluZm8odXNlckluZm8ubmFtZSwgdXNlckluZm8uYWJvdXQpXHJcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgaGFuZGxlVXNlckluZm8odXNlckluZm8pO1xyXG4gICAgICAgICAgcG9wdXBVc2VyLmNsb3NlKCk7XHJcbiAgICAgICAgICB1c2VyVmFsaWRhdGUuY2hhbmdlQnV0dG9uVGV4dCgn0KHQvtGF0YDQsNC90LjRgtGMJyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICAgIH0pO1xyXG4gICAgcG9wdXBVc2VyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgLy8tLS0tLS0tLS0t0LTQvtCx0LDQstC70LXQvdC40LUg0LDQstCw0YLQsNGA0LrQuCDQv9GA0L7RhNC40LvRjyDQvdCwINGB0LXRgNCy0LXRgC0tLS0tLS0tLS0tLS0tLVxyXG4gICAgY29uc3QgcG9wdXBBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX3R5cGVfYXZhdGFyJywgKHVzZXJJbmZvKSA9PiB7XHJcbiAgICAgIGF2YXRhclZhbGlkYXRlLmNoYW5nZUJ1dHRvblRleHQoJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJyk7XHJcbiAgICAgIGFwaS5lZGl0VXNlckF2YXRhcih1c2VySW5mby5hdmF0YXIpXHJcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgaGFuZGxlVXNlckF2YXRhcih1c2VySW5mbyk7XHJcbiAgICAgICAgICBwb3B1cEF2YXRhci5jbG9zZSgpO1xyXG4gICAgICAgICAgYXZhdGFyVmFsaWRhdGUuY2hhbmdlQnV0dG9uVGV4dCgn0KHQvtGF0YDQsNC90LjRgtGMJyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICAgIH0pO1xyXG4gICAgcG9wdXBBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICAvLy0tLS0tLS0tLS0tLS3RgdC70YPRiNCw0YLQtdC70LgtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgZWRpdFByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7ICAgICAgXHJcbiAgICAgIHVzZXJGb3JtLm5hbWUudmFsdWUgPSBjdXJyZW50VXNlckluZm8ubmFtZTtcclxuICAgICAgdXNlckZvcm0uYWJvdXQudmFsdWUgPSBjdXJyZW50VXNlckluZm8uYWJvdXQ7XHJcbiAgICAgIHVzZXJWYWxpZGF0ZS5yZXNldEVycm9yVGV4dCgpO1xyXG4gICAgICBwb3B1cFVzZXIub3BlbigpO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIGFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIGNhcmRWYWxpZGF0ZS5yZXNldEVycm9yVGV4dCgpO1xyXG4gICAgICBwb3B1cEFkZENhcmQub3BlbigpO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIGF2YXRhck92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIGF2YXRhclZhbGlkYXRlLnJlc2V0RXJyb3JUZXh0KCk7XHJcbiAgICAgIHBvcHVwQXZhdGFyLm9wZW4oKTtcclxuICAgIH0pO1xyXG5cclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gIH0pOyBcclxuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLdCy0LDQu9C40LTQsNGG0LjRjy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuY29uc3QgdXNlclZhbGlkYXRlID0gbmV3IEZvcm1WYWxpZGF0b3Iob2JqLCB1c2VyRm9ybSk7XHJcbmNvbnN0IGNhcmRWYWxpZGF0ZSA9IG5ldyBGb3JtVmFsaWRhdG9yKG9iaiwgY2FyZEZvcm0pO1xyXG5jb25zdCBhdmF0YXJWYWxpZGF0ZSA9IG5ldyBGb3JtVmFsaWRhdG9yKG9iaiwgYXZhdGFyRm9ybSk7XHJcblxyXG51c2VyVmFsaWRhdGUuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5jYXJkVmFsaWRhdGUuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hdmF0YXJWYWxpZGF0ZS5lbmFibGVWYWxpZGF0aW9uKCk7Il0sInNvdXJjZVJvb3QiOiIifQ==