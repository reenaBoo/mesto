(()=>{"use strict";function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var e=function(){function e(t,n,r,o,i,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this._text=t.name,this._image=t.link,this._cardSelector=n,this.likes=t.likes,this.cardId=t._id,this._ownerId=t.owner._id,this._handleCardClick=r,this._userId=a,this._handleCardLike=o.bind(this),this._handleCardDelete=i}var n,r;return n=e,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._cardImage=this._element.querySelector(".card__image"),this._cardTitle=this._element.querySelector(".card__title"),this._cardButtonDelete=this._element.querySelector(".card__delete-button"),this._cardButtonLike=this._element.querySelector(".card__like-button"),this._likeCounter=this._element.querySelector(".card__like-counter"),this._setEventListeners(),this._checkCardOwner(),this._cardImage.src=this._image,this._cardImage.alt=this._text,this._cardTitle.textContent=this._text,this.handleToggleLike(),this.setCounter(this.likes.length),this._element}},{key:"_checkCardOwner",value:function(){this._ownerId!==this._userId&&this._cardButtonDelete.remove()}},{key:"setCounter",value:function(t){this._likeCounter.textContent=t}},{key:"_setEventListeners",value:function(){var t=this;this._cardButtonLike.addEventListener("click",(function(){t._handleCardLike(t)})),this._cardButtonDelete.addEventListener("click",(function(){t._handleCardDelete(t)})),this._cardImage.addEventListener("click",(function(){t._handleCardClick()}))}},{key:"handleToggleLike",value:function(){this.isLiked()?this._cardButtonLike.classList.add("card__like-button_active"):this._cardButtonLike.classList.remove("card__like-button_active")}},{key:"removeElement",value:function(){this._element.remove()}},{key:"isLiked",value:function(){var t=this;return this.likes.some((function(e){return e._id===t._userId}))}}])&&t(n.prototype,r),e}();function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var r=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._inputSelector=e.inputSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=n,this._submitButton=this._form.querySelector(e.submitButtonSelector),this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector))}var e,r;return e=t,(r=[{key:"_showInputError",value:function(t){var e=this._form.querySelector(".".concat(t.id,"-error"));t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage,e.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(t){var e=this._form.querySelector(".".concat(t.id,"-error"));t.classList.remove(this._inputErrorClass),e.classList.remove(this._errorClass),e.textContent=""}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.setAttribute("disabled","true")):(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.removeAttribute("disabled"))}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"_setEventListener",value:function(){var t=this;this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListener()}},{key:"resetValidation",value:function(){var t=this;this._inputList.forEach((function(e){t._hideInputError(e)})),this._toggleButtonState()}}])&&n(e.prototype,r),t}();function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=e,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"renderItems",value:function(t){var e=this;t.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(t){this._container.prepend(t)}},{key:"addItemAppend",value:function(t){this._container.append(t)}}])&&o(e.prototype,n),t}();function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"_handleEscClose",(function(t){"Escape"===t.key&&n.close()})),this._popup=document.querySelector(e)}var e,n;return e=t,(n=[{key:"open",value:function(){document.addEventListener("keydown",this._handleEscClose),this._popup.classList.add("popup_opened")}},{key:"close",value:function(){document.removeEventListener("keydown",this._handleEscClose),this._popup.classList.remove("popup_opened")}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("mousedown",(function(e){e.target.classList.contains("popup")&&t.close()})),this._popup.addEventListener("click",(function(e){e.target.classList.contains("popup__close-button")&&t.close()}))}}])&&a(e.prototype,n),t}();function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=p(r);if(o){var n=p(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t))._popupImage=e._popup.querySelector(".figure__image"),e._popupTitle=e._popup.querySelector(".figure__title"),e}return e=a,(n=[{key:"openImage",value:function(t,e){this._popupImage.src=e,this._popupImage.alt=t,this._popupTitle.textContent=t,l(p(a.prototype),"open",this).call(this)}}])&&s(e.prototype,n),a}(u);function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e,n){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(t,e){return!e||"object"!==d(e)&&"function"!=typeof e?k(t):e}function k(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=g(r);if(o){var n=g(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return b(this,t)});function a(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(k(n=i.call(this,t)),"changeButtonText",(function(t){n._confirmButton.textContent=t})),n._form=n._popup.querySelector(".form"),n._confirmButton=n._form.querySelector(".form__save-button"),n._handleSubmit=e,n}return e=a,(n=[{key:"_getInputValues",value:function(){var t=this;return this._inputsList=this._form.querySelectorAll(".form__input"),this._data={},this._inputsList.forEach((function(e){t._data[e.name]=e.value})),this._data}},{key:"setEventListeners",value:function(){var t=this;v(g(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault();var n=t._getInputValues();t._handleSubmit(n)}))}},{key:"close",value:function(){this._form.reset(),v(g(a.prototype),"close",this).call(this)}}])&&y(e.prototype,n),a}(u);function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var C=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._userName=e,this._userAbout=n,this._userAvatar=r,this._profileId=""}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this._userName.textContent,about:this._userAbout.textContent}}},{key:"setUserInfo",value:function(t,e,n){this._userName.textContent=t,this._userAbout.textContent=e,this._userId=n}},{key:"setUserAvatar",value:function(t){this._userAvatar.src=t}},{key:"getUserId",value:function(){return this._userId}}])&&S(e.prototype,n),t}();function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var L=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._cohort=e,this._url=n,this._token=r}var e,n;return e=t,(n=[{key:"_checkStatus",value:function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}},{key:"getInitialCards",value:function(){return fetch("".concat(this._url,"/").concat(this._cohort,"/cards"),{headers:{authorization:this._token}}).then(this._checkStatus)}},{key:"postNewCard",value:function(t,e){return fetch("".concat(this._url,"/").concat(this._cohort,"/cards"),{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:t,link:e})}).then(this._checkStatus)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._url,"/").concat(this._cohort,"/users/me"),{headers:{authorization:this._token}}).then(this._checkStatus)}},{key:"editUserInfo",value:function(t,e){return fetch("".concat(this._url,"/").concat(this._cohort,"/users/me"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:t,about:e})}).then(this._checkStatus)}},{key:"editUserAvatar",value:function(t){return fetch("".concat(this._url,"/").concat(this._cohort,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({avatar:t})}).then(this._checkStatus)}},{key:"likeCard",value:function(t){return fetch("".concat(this._url,"/").concat(this._cohort,"/cards/likes/").concat(t),{method:"PUT",headers:{authorization:this._token,"Content-Type":"application/json"}}).then(this._checkStatus)}},{key:"deleteLike",value:function(t){return fetch("".concat(this._url,"/").concat(this._cohort,"/cards/likes/").concat(t),{method:"DELETE",headers:{authorization:this._token,"Content-Type":"application/json"}}).then(this._checkStatus)}},{key:"deleteCard",value:function(t){return fetch("".concat(this._url,"/").concat(this._cohort,"/cards/").concat(t),{method:"DELETE",headers:{authorization:this._token,"Content-Type":"application/json"}}).then(this._checkStatus)}}])&&E(e.prototype,n),t}();function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function j(t,e,n){return(j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=B(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function P(t,e){return!e||"object"!==O(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function B(t){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=B(r);if(o){var n=B(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return P(this,t)});function a(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t))._form=n._popup.querySelector(".form"),n._handleSubmit=e,n}return e=a,(n=[{key:"setEventListeners",value:function(){var t=this;j(B(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._handleSubmit(t.card)}))}},{key:"open",value:function(t){j(B(a.prototype),"open",this).call(this),this.card=t}}])&&I(e.prototype,n),a}(u),x={inputSelector:".form__input",submitButtonSelector:".form__save-button",inactiveButtonClass:"form__save-button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"},R=document.querySelector(".profile__name"),A=document.querySelector(".profile__description"),U=document.querySelector(".profile__avatar"),D=document.querySelector(".form_type_user"),V=document.querySelector(".form_type_card"),N=document.querySelector(".form_type_avatar"),z=document.querySelector(".profile__edit-button"),J=document.querySelector(".profile__add-button"),H=document.querySelector(".profile__avatar-overlay");function M(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var $=new L("cohort-26","https://nomoreparties.co/v1/","254abe0c-6cde-4d88-b5b9-683b939cbbc8"),F=new _(".popup_type_image");F.setEventListeners();var G=new C(R,A,U);function K(t){G.setUserInfo(t.name,t.about,t._id)}function Q(t){G.setUserAvatar(t.avatar)}function W(t){var e=this;(t.isLiked()?$.deleteLike(t.cardId):$.likeCard(t.cardId)).then((function(t){e.likes=t.likes,e.handleToggleLike(),e.setCounter(t.likes.length)})).catch((function(t){return console.log(t)}))}function X(t){Y.open(t)}var Y=new q(".popup_type_delete",(function(t){$.deleteCard(t.cardId).then((function(e){"Пост удалён"===e.message&&(t.removeElement(),Y.close())})).catch((function(t){return console.log(t)}))}));Y.setEventListeners();var Z=function(t){return function(t){var n=G.getUserId();return new e(t,".template-card",(function(){F.openImage(t.name,t.link)}),W,X,n)}(t).generateCard()},tt=new i((function(t){tt.addItemAppend(Z(t))}),".cards");Promise.all([$.getUserInfo(),$.getInitialCards()]).then((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,n)||function(t,e){if(t){if("string"==typeof t)return M(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];K(o),Q(o),tt.renderItems(i);var a=new w(".popup_type_new-card",(function(t){a.changeButtonText("Создание..."),$.postNewCard(t.name,t.link).then((function(t){tt.addItem(Z(t)),a.close(),a.changeButtonText("Создать")})).catch((function(t){return console.log(t)}))}));a.setEventListeners();var u=new w(".popup_type_edit",(function(t){u.changeButtonText("Сохранение..."),$.editUserInfo(t.name,t.about).then((function(){K(t),u.close(),u.changeButtonText("Сохранить")})).catch((function(t){return console.log(t)}))}));u.setEventListeners();var c=new w(".popup_type_avatar",(function(t){c.changeButtonText("Сохранение..."),$.editUserAvatar(t.avatar).then((function(){Q(t),c.close(),c.changeButtonText("Сохранить")})).catch((function(t){return console.log(t)}))}));c.setEventListeners(),z.addEventListener("click",(function(){var t=G.getUserInfo();D.name.value=t.name,D.about.value=t.about,et.resetValidation(),u.open()})),J.addEventListener("click",(function(){nt.resetValidation(),a.open()})),H.addEventListener("click",(function(){rt.resetValidation(),c.open()}))})).catch((function(t){console.log(t)}));var et=new r(x,D),nt=new r(x,V),rt=new r(x,N);et.enableValidation(),nt.enableValidation(),rt.enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by13ZWJwYWNrLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by13ZWJwYWNrLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by13ZWJwYWNrLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by13ZWJwYWNrLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8td2VicGFjay8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLXdlYnBhY2svLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLXdlYnBhY2svLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by13ZWJwYWNrLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLXdlYnBhY2svLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhTdWJtaXQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8td2VicGFjay8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8td2VicGFjay8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJuYW1lcyI6WyJDYXJkIiwiZGF0YSIsInRlbXBsYXRlIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlQ2FyZExpa2UiLCJoYW5kbGVDYXJkRGVsZXRlIiwidXNlcklkIiwidGhpcyIsIl90ZXh0IiwibmFtZSIsIl9pbWFnZSIsImxpbmsiLCJfY2FyZFNlbGVjdG9yIiwibGlrZXMiLCJjYXJkSWQiLCJfaWQiLCJfb3duZXJJZCIsIm93bmVyIiwiX2hhbmRsZUNhcmRDbGljayIsIl91c2VySWQiLCJfaGFuZGxlQ2FyZExpa2UiLCJiaW5kIiwiX2hhbmRsZUNhcmREZWxldGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfY2FyZEltYWdlIiwiX2NhcmRUaXRsZSIsIl9jYXJkQnV0dG9uRGVsZXRlIiwiX2NhcmRCdXR0b25MaWtlIiwiX2xpa2VDb3VudGVyIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2NoZWNrQ2FyZE93bmVyIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJoYW5kbGVUb2dnbGVMaWtlIiwic2V0Q291bnRlciIsImxlbmd0aCIsInJlbW92ZSIsImxpa2VzTGVuZ3RoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImlzTGlrZWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJzb21lIiwibGlrZSIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtIiwiX3N1Ym1pdEJ1dHRvbiIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dEVsZW1lbnQiLCJlcnJvckVsZW1lbnQiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hhc0ludmFsaWRJbnB1dCIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJmb3JFYWNoIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9zZXRFdmVudExpc3RlbmVyIiwiU2VjdGlvbiIsInJlbmRlcmVyIiwiY29udGFpbmVyU2VsZWN0b3IiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiaXRlbXNBcnJheSIsIml0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsImFwcGVuZCIsIlBvcHVwIiwicG9wdXAiLCJldnQiLCJrZXkiLCJjbG9zZSIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEltYWdlIiwiX3BvcHVwSW1hZ2UiLCJfcG9wdXBUaXRsZSIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVTdWJtaXQiLCJ0ZXh0IiwiX2NvbmZpcm1CdXR0b24iLCJfaGFuZGxlU3VibWl0IiwiX2lucHV0c0xpc3QiLCJfZGF0YSIsImlucHV0IiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiVXNlckluZm8iLCJ1c2VyTmFtZSIsInVzZXJBYm91dCIsInVzZXJBdmF0YXIiLCJfdXNlck5hbWUiLCJfdXNlckFib3V0IiwiX3VzZXJBdmF0YXIiLCJfcHJvZmlsZUlkIiwiYWJvdXQiLCJuYW1lVXBkYXRlIiwiYWJvdXRVcGRhdGUiLCJhdmF0YXJVcGRhdGUiLCJBcGkiLCJjb2hvcnQiLCJ1cmwiLCJ0b2tlbiIsIl9jb2hvcnQiLCJfdXJsIiwiX3Rva2VuIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJ0aGVuIiwiX2NoZWNrU3RhdHVzIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhdmF0YXIiLCJQb3B1cFdpdGhTdWJtaXQiLCJjYXJkIiwib2JqIiwidXNlckpvYiIsInVzZXJGb3JtIiwiY2FyZEZvcm0iLCJhdmF0YXJGb3JtIiwiZWRpdFByb2ZpbGVCdXR0b24iLCJhZGRDYXJkQnV0dG9uIiwiYXZhdGFyT3ZlcmxheSIsImFwaSIsInBvcHVwV2l0aEltYWdlIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ1c2VyRGF0YSIsImhhbmRsZVVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJoYW5kbGVVc2VyQXZhdGFyIiwic2V0VXNlckF2YXRhciIsImRlbGV0ZUxpa2UiLCJsaWtlQ2FyZCIsInJlc3BvbnNlIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwicG9wdXBEZWxldGUiLCJvcGVuIiwiZGVsZXRlQ2FyZCIsIm1lc3NhZ2UiLCJyZW1vdmVFbGVtZW50IiwicmVuZGVyQ2FyZCIsImdldFVzZXJJZCIsIm9wZW5JbWFnZSIsImNyZWF0ZUNhcmQiLCJnZW5lcmF0ZUNhcmQiLCJyZW5kZXJDYXJkcyIsImFkZEl0ZW1BcHBlbmQiLCJhbGwiLCJnZXRVc2VySW5mbyIsImdldEluaXRpYWxDYXJkcyIsImFwaURhdGEiLCJjYXJkc0RhdGEiLCJyZW5kZXJJdGVtcyIsInBvcHVwQWRkQ2FyZCIsImRhdGFDYXJkIiwiY2hhbmdlQnV0dG9uVGV4dCIsInBvc3ROZXdDYXJkIiwiYWRkSXRlbSIsInBvcHVwVXNlciIsInVzZXJJbmZvIiwiZWRpdFVzZXJJbmZvIiwicG9wdXBBdmF0YXIiLCJlZGl0VXNlckF2YXRhciIsImN1cnJlbnRVc2VySW5mbyIsInVzZXJWYWxpZGF0ZSIsInJlc2V0VmFsaWRhdGlvbiIsImNhcmRWYWxpZGF0ZSIsImF2YXRhclZhbGlkYXRlIiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJtYXBwaW5ncyI6InlMQUFPLElBQU1BLEVBQWIsV0FDRSxXQUFZQyxFQUFNQyxFQUFVQyxFQUFpQkMsRUFBZ0JDLEVBQWtCQyxJLDRGQUFRLFNBQ3JGQyxLQUFLQyxNQUFRUCxFQUFLUSxLQUNsQkYsS0FBS0csT0FBU1QsRUFBS1UsS0FDbkJKLEtBQUtLLGNBQWdCVixFQUNyQkssS0FBS00sTUFBUVosRUFBS1ksTUFDbEJOLEtBQUtPLE9BQVNiLEVBQUtjLElBQ25CUixLQUFLUyxTQUFXZixFQUFLZ0IsTUFBTUYsSUFDM0JSLEtBQUtXLGlCQUFtQmYsRUFDeEJJLEtBQUtZLFFBQVViLEVBQ2ZDLEtBQUthLGdCQUFrQmhCLEVBQWVpQixLQUFLZCxN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b25zdHJ1Y3RvcihkYXRhLCB0ZW1wbGF0ZSwgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVDYXJkTGlrZSwgaGFuZGxlQ2FyZERlbGV0ZSwgdXNlcklkKSB7XHJcbiAgICB0aGlzLl90ZXh0ID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5faW1hZ2UgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSB0ZW1wbGF0ZTtcclxuICAgIHRoaXMubGlrZXMgPSBkYXRhLmxpa2VzO1xyXG4gICAgdGhpcy5jYXJkSWQgPSBkYXRhLl9pZDtcclxuICAgIHRoaXMuX293bmVySWQgPSBkYXRhLm93bmVyLl9pZDtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRMaWtlID0gaGFuZGxlQ2FyZExpa2UuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmREZWxldGUgPSBoYW5kbGVDYXJkRGVsZXRlO1xyXG4gIH07XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgIC5jb250ZW50XHJcbiAgICAucXVlcnlTZWxlY3RvcignLmNhcmQnKVxyXG4gICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICAgIFxyXG4gIC8vINCy0LXRgNC90ZHQvCBET00t0Y3Qu9C10LzQtdC90YIg0LrQsNGA0YLQvtGH0LrQuFxyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gIH07XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIC8vINCX0LDQv9C40YjQtdC8INGA0LDQt9C80LXRgtC60YMg0LIg0L/RgNC40LLQsNGC0L3QvtC1INC/0L7Qu9C1IF9lbGVtZW50LiBcclxuICAgIC8vINCi0LDQuiDRgyDQtNGA0YPQs9C40YUg0Y3Qu9C10LzQtdC90YLQvtCyINC/0L7Rj9Cy0LjRgtGB0Y8g0LTQvtGB0YLRg9C/INC6INC90LXQuS5cclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1hZ2UnKTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX3RpdGxlJyk7XHJcbiAgICB0aGlzLl9jYXJkQnV0dG9uRGVsZXRlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fZGVsZXRlLWJ1dHRvbicpO1xyXG4gICAgdGhpcy5fY2FyZEJ1dHRvbkxpa2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlLWJ1dHRvbicpO1xyXG4gICAgdGhpcy5fbGlrZUNvdW50ZXIgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlLWNvdW50ZXInKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9jaGVja0NhcmRPd25lcigpO1xyXG4gIFxyXG4gICAgLy8g0JTQvtCx0LDQstC40Lwg0LTQsNC90L3Ri9C1XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5faW1hZ2U7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fdGV4dDtcclxuICAgIHRoaXMuX2NhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX3RleHQ7XHJcbiAgICB0aGlzLmhhbmRsZVRvZ2dsZUxpa2UoKTtcclxuICAgIHRoaXMuc2V0Q291bnRlcih0aGlzLmxpa2VzLmxlbmd0aCk7XHJcbiAgXHJcbiAgICAvLyDQktC10YDQvdGR0Lwg0Y3Qu9C10LzQtdC90YIg0L3QsNGA0YPQttGDXHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9O1xyXG5cclxuICBfY2hlY2tDYXJkT3duZXIoKSB7XHJcbiAgICAgIGlmKHRoaXMuX293bmVySWQgIT09IHRoaXMuX3VzZXJJZCkge1xyXG4gICAgICB0aGlzLl9jYXJkQnV0dG9uRGVsZXRlLnJlbW92ZSgpO1xyXG5cclxuICAgIH1cclxuICB9O1xyXG5cclxuICBzZXRDb3VudGVyKGxpa2VzTGVuZ3RoKSB7XHJcbiAgICB0aGlzLl9saWtlQ291bnRlci50ZXh0Q29udGVudCA9IGxpa2VzTGVuZ3RoO1xyXG4gIH07XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2NhcmRCdXR0b25MaWtlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkTGlrZSh0aGlzKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fY2FyZEJ1dHRvbkRlbGV0ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlQ2FyZERlbGV0ZSh0aGlzKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soKTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIGhhbmRsZVRvZ2dsZUxpa2UoKSB7ICAgIFxyXG4gICAgaWYodGhpcy5pc0xpa2VkKCkpIHtcclxuICAgICAgdGhpcy5fY2FyZEJ1dHRvbkxpa2UuY2xhc3NMaXN0LmFkZCgnY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9jYXJkQnV0dG9uTGlrZS5jbGFzc0xpc3QucmVtb3ZlKCdjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmUnKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICByZW1vdmVFbGVtZW50KCkge1xyXG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICB9O1xyXG5cclxuICBpc0xpa2VkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMubGlrZXMuc29tZShsaWtlID0+IHtcclxuICAgICAgcmV0dXJuIGxpa2UuX2lkID09PSB0aGlzLl91c2VySWQ7XHJcbiAgICB9KTtcclxuICB9O1xyXG59OyIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm0pIHtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcclxuICAgIFxyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcclxuICAgIFxyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm07XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpKTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH07XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XHJcbiAgfTtcclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICd0cnVlJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXIoKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVyKCk7XHJcbiAgfTtcclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gIH07ICBcclxufTsiLCJleHBvcnQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IocmVuZGVyZXIsIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcyhpdGVtc0FycmF5KSB7XHJcbiAgICBpdGVtc0FycmF5LmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbUFwcGVuZChlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufSIsImV4cG9ydCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXApIHtcclxuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cCk7XHJcbiAgfTtcclxuXHJcbiAgb3BlbigpIHtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcclxuICB9O1xyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcclxuICB9O1xyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfTtcclxuICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldnQpID0+IHtcclxuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cCcpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2Nsb3NlLWJ1dHRvbicpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcbiAgfTtcclxufSIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwKSB7XHJcbiAgICBzdXBlcihwb3B1cCk7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLmZpZ3VyZV9faW1hZ2UnKTtcclxuICAgIHRoaXMuX3BvcHVwVGl0bGUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcuZmlndXJlX190aXRsZScpO1xyXG4gIH1cclxuXHJcbiAgb3BlbkltYWdlKG5hbWUsIGxpbmspIHtcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2Uuc3JjID0gbGluaztcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2UuYWx0ID0gbmFtZTtcclxuICAgIHRoaXMuX3BvcHVwVGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufSIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXAsIGhhbmRsZVN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wdXApO1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtJyk7XHJcbiAgICB0aGlzLl9jb25maXJtQnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKCcuZm9ybV9fc2F2ZS1idXR0b24nKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcclxuICB9O1xyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dHNMaXN0ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybV9faW5wdXQnKTtcclxuICAgIHRoaXMuX2RhdGEgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0c0xpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgdGhpcy5fZGF0YVtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGhpcy5fZGF0YTtcclxuICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXQoZGF0YSk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgfTtcclxuXHJcbiAgY2hhbmdlQnV0dG9uVGV4dCA9ICh0ZXh0KSA9PiB7XHJcbiAgICB0aGlzLl9jb25maXJtQnV0dG9uLnRleHRDb250ZW50ID0gdGV4dDtcclxuICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHVzZXJOYW1lLCB1c2VyQWJvdXQsIHVzZXJBdmF0YXIpIHtcclxuICAgIHRoaXMuX3VzZXJOYW1lID0gdXNlck5hbWU7XHJcbiAgICB0aGlzLl91c2VyQWJvdXQgPSB1c2VyQWJvdXQ7XHJcbiAgICB0aGlzLl91c2VyQXZhdGFyID0gdXNlckF2YXRhcjtcclxuICAgIHRoaXMuX3Byb2ZpbGVJZCA9ICcnO1xyXG4gIH07XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIGFib3V0OiB0aGlzLl91c2VyQWJvdXQudGV4dENvbnRlbnRcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKG5hbWVVcGRhdGUsIGFib3V0VXBkYXRlLCBfaWQpIHtcclxuICAgIHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50ID0gbmFtZVVwZGF0ZTtcclxuICAgIHRoaXMuX3VzZXJBYm91dC50ZXh0Q29udGVudCA9IGFib3V0VXBkYXRlO1xyXG4gICAgdGhpcy5fdXNlcklkID0gX2lkO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckF2YXRhcihhdmF0YXJVcGRhdGUpIHtcclxuICAgIHRoaXMuX3VzZXJBdmF0YXIuc3JjID0gYXZhdGFyVXBkYXRlO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlcklkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3VzZXJJZDtcclxuICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcihjb2hvcnQsIHVybCwgdG9rZW4pIHtcclxuICAgIHRoaXMuX2NvaG9ydCA9IGNvaG9ydDtcclxuICAgIHRoaXMuX3VybCA9IHVybDtcclxuICAgIHRoaXMuX3Rva2VuID0gdG9rZW47XHJcbiAgfVxyXG5cclxuICBfY2hlY2tTdGF0dXMocmVzKSB7ICAgIFxyXG4gICAgICBpZihyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfVxyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS8ke3RoaXMuX2NvaG9ydH0vY2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlblxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgLnRoZW4odGhpcy5fY2hlY2tTdGF0dXMpXHJcbiAgfVxyXG5cclxuICBwb3N0TmV3Q2FyZChuYW1lLCBsaW5rKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS8ke3RoaXMuX2NvaG9ydH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBsaW5rOiBsaW5rXHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gICAgLnRoZW4odGhpcy5fY2hlY2tTdGF0dXMpXHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9LyR7dGhpcy5fY29ob3J0fS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICAudGhlbih0aGlzLl9jaGVja1N0YXR1cylcclxuICB9XHJcblxyXG4gIGVkaXRVc2VySW5mbyhuYW1lLCBhYm91dCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vJHt0aGlzLl9jb2hvcnR9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgIGFib3V0OiBhYm91dFxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICAgIC50aGVuKHRoaXMuX2NoZWNrU3RhdHVzKVxyXG4gIH1cclxuXHJcbiAgZWRpdFVzZXJBdmF0YXIoYXZhdGFyKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS8ke3RoaXMuX2NvaG9ydH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IGF2YXRhclxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICAgIC50aGVuKHRoaXMuX2NoZWNrU3RhdHVzKVxyXG4gIH1cclxuXHJcbiAgbGlrZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS8ke3RoaXMuX2NvaG9ydH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgLnRoZW4odGhpcy5fY2hlY2tTdGF0dXMpXHJcbiAgfVxyXG5cclxuICBkZWxldGVMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vJHt0aGlzLl9jb2hvcnR9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuLFxyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIC50aGVuKHRoaXMuX2NoZWNrU3RhdHVzKVxyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9LyR7dGhpcy5fY29ob3J0fS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICAudGhlbih0aGlzLl9jaGVja1N0YXR1cylcclxuICB9XHJcbn0iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoU3VibWl0IGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwLCBoYW5kbGVTdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwKTtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcuZm9ybScpO1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0O1xyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlU3VibWl0KHRoaXMuY2FyZCk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBvcGVuKGNhcmQpIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIHRoaXMuY2FyZCA9IGNhcmQ7XHJcbiAgfTtcclxufSIsImV4cG9ydCB7b2JqLCB1c2VyRm9ybSwgY2FyZEZvcm0sIGF2YXRhckZvcm0sIGVkaXRQcm9maWxlQnV0dG9uLCBhZGRDYXJkQnV0dG9uLCBhdmF0YXJPdmVybGF5LCB1c2VyTmFtZSwgdXNlckpvYiwgdXNlckF2YXRhcn07XHJcblxyXG5jb25zdCBvYmogPSAoe1xyXG4gIGlucHV0U2VsZWN0b3I6ICcuZm9ybV9faW5wdXQnLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLmZvcm1fX3NhdmUtYnV0dG9uJyxcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAnZm9ybV9fc2F2ZS1idXR0b25fZGlzYWJsZWQnLFxyXG4gIGlucHV0RXJyb3JDbGFzczogJ2Zvcm1fX2lucHV0X3R5cGVfZXJyb3InLFxyXG4gIGVycm9yQ2xhc3M6ICdmb3JtX19pbnB1dC1lcnJvcl9hY3RpdmUnXHJcbn0pO1xyXG5cclxuY29uc3QgdXNlck5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fbmFtZScpO1xyXG5jb25zdCB1c2VySm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2Rlc2NyaXB0aW9uJyk7XHJcbmNvbnN0IHVzZXJBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyJyk7XHJcblxyXG5jb25zdCB1c2VyRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX3R5cGVfdXNlcicpO1xyXG5jb25zdCBjYXJkRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX3R5cGVfY2FyZCcpO1xyXG5jb25zdCBhdmF0YXJGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm1fdHlwZV9hdmF0YXInKTtcclxuXHJcbmNvbnN0IGVkaXRQcm9maWxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7XHJcbmNvbnN0IGFkZENhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpO1xyXG5jb25zdCBhdmF0YXJPdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhci1vdmVybGF5Jyk7IiwiaW1wb3J0IHtDYXJkfSBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xyXG5pbXBvcnQge0Zvcm1WYWxpZGF0b3J9IGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XHJcbmltcG9ydCB7U2VjdGlvbn0gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcclxuaW1wb3J0IHtQb3B1cFdpdGhJbWFnZX0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XHJcbmltcG9ydCB7UG9wdXBXaXRoRm9ybX0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcclxuaW1wb3J0IHtVc2VySW5mb30gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XHJcbmltcG9ydCB7QXBpfSBmcm9tICcuLi9jb21wb25lbnRzL0FwaS5qcyc7XHJcbmltcG9ydCB7UG9wdXBXaXRoU3VibWl0fSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aFN1Ym1pdC5qcyc7XHJcbmltcG9ydCB7b2JqLCB1c2VyRm9ybSwgY2FyZEZvcm0sIGF2YXRhckZvcm0sIGVkaXRQcm9maWxlQnV0dG9uLCBhZGRDYXJkQnV0dG9uLCBhdmF0YXJPdmVybGF5LCB1c2VyTmFtZSwgdXNlckpvYiwgdXNlckF2YXRhcn0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcclxuaW1wb3J0ICcuL2luZGV4LmNzcyc7XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKCdjb2hvcnQtMjYnLCAnaHR0cHM6Ly9ub21vcmVwYXJ0aWVzLmNvL3YxLycsICcyNTRhYmUwYy02Y2RlLTRkODgtYjViOS02ODNiOTM5Y2JiYzgnKTtcclxuXHJcbmNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKCcucG9wdXBfdHlwZV9pbWFnZScpO1xyXG5wb3B1cFdpdGhJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgdXNlckRhdGEgPSBuZXcgVXNlckluZm8odXNlck5hbWUsIHVzZXJKb2IsIHVzZXJBdmF0YXIpO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlVXNlckluZm8gKGRhdGEpIHtcclxuICB1c2VyRGF0YS5zZXRVc2VySW5mbyhkYXRhLm5hbWUsIGRhdGEuYWJvdXQsIGRhdGEuX2lkKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlVXNlckF2YXRhcihkYXRhKSB7XHJcbiAgdXNlckRhdGEuc2V0VXNlckF2YXRhcihkYXRhLmF2YXRhcilcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZExpa2UoY2FyZCkge1xyXG4gIGNvbnN0IGNhcmRBcnIgPSBjYXJkLmlzTGlrZWQoKSA/IGFwaS5kZWxldGVMaWtlKGNhcmQuY2FyZElkKSA6IGFwaS5saWtlQ2FyZChjYXJkLmNhcmRJZCk7XHJcbiAgY2FyZEFyci50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgdGhpcy5saWtlcyA9IHJlc3BvbnNlLmxpa2VzO1xyXG4gICAgdGhpcy5oYW5kbGVUb2dnbGVMaWtlKCk7XHJcbiAgICB0aGlzLnNldENvdW50ZXIocmVzcG9uc2UubGlrZXMubGVuZ3RoKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDYXJkRGVsZXRlKGNhcmQpIHtcclxuICBwb3B1cERlbGV0ZS5vcGVuKGNhcmQpO1xyXG59XHJcblxyXG5jb25zdCBwb3B1cERlbGV0ZSA9IG5ldyBQb3B1cFdpdGhTdWJtaXQoJy5wb3B1cF90eXBlX2RlbGV0ZScsIChjYXJkKSA9PiB7XHJcbiAgYXBpLmRlbGV0ZUNhcmQoY2FyZC5jYXJkSWQpXHJcbiAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgaWYgKHJlcy5tZXNzYWdlID09PSBcItCf0L7RgdGCINGD0LTQsNC70ZHQvVwiKSB7XHJcbiAgICAgIGNhcmQucmVtb3ZlRWxlbWVudCgpO1xyXG4gICAgICBwb3B1cERlbGV0ZS5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH0pICBcclxuICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICB9KTtcclxucG9wdXBEZWxldGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS3RhNGD0L3QutGG0LjQuCDQtNC70Y8g0YHQsdC+0YDQutC4INC60LDRgNGC0L7Rh9C10LotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5jb25zdCBjcmVhdGVDYXJkID0gKGl0ZW0pID0+IHtcclxuICBjb25zdCB1c2VySWQgPSB1c2VyRGF0YS5nZXRVc2VySWQoKTtcclxuICByZXR1cm4gbmV3IENhcmQoaXRlbSwgJy50ZW1wbGF0ZS1jYXJkJywgXHJcbiAgZnVuY3Rpb24gaGFuZGxlQ2FyZENsaWNrKCkge3BvcHVwV2l0aEltYWdlLm9wZW5JbWFnZShpdGVtLm5hbWUsIGl0ZW0ubGluayl9LCBcclxuICBoYW5kbGVDYXJkTGlrZSwgXHJcbiAgaGFuZGxlQ2FyZERlbGV0ZSwgXHJcbiAgdXNlcklkKTsgIFxyXG59O1xyXG5cclxuY29uc3QgcmVuZGVyQ2FyZCA9IChpdGVtKSA9PiB7XHJcbiAgcmV0dXJuIGNyZWF0ZUNhcmQoaXRlbSkuZ2VuZXJhdGVDYXJkKCk7XHJcbn07XHJcblxyXG5jb25zdCByZW5kZXJDYXJkcyA9IG5ldyBTZWN0aW9uKFxyXG4gIGZ1bmN0aW9uIHJlbmRlcmVyKGl0ZW0pIHsgICAgICBcclxuICAgIHJlbmRlckNhcmRzLmFkZEl0ZW1BcHBlbmQocmVuZGVyQ2FyZChpdGVtKSk7XHJcbiAgfSwgXHJcbiAgJy5jYXJkcycpO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tQVBJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbygpLCBhcGkuZ2V0SW5pdGlhbENhcmRzKCldKVxyXG4gIC50aGVuKChbYXBpRGF0YSwgY2FyZHNEYXRhXSkgPT4ge1xyXG4gICAgLy8tLS0tLS0tLS0tLS0tLdC30LDQv9C+0LvQvdC10L3QuNC1INC/0YDQvtGE0LjQu9GPLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICBoYW5kbGVVc2VySW5mbyhhcGlEYXRhKTtcclxuICAgIGhhbmRsZVVzZXJBdmF0YXIoYXBpRGF0YSk7XHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLdGA0LXQvdC00LXRgCDQutCw0YDRgtC+0YfQtdC6LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIHJlbmRlckNhcmRzLnJlbmRlckl0ZW1zKGNhcmRzRGF0YSk7XHJcblxyXG4gICAgLy8tLS0tLS0tLS3QtNC+0LHQsNCy0LvQtdC90LjQtSDQutCw0YDRgtC+0YfQutC4INC90LAg0YHQtdGA0LLQtdGALS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICBjb25zdCBwb3B1cEFkZENhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX3R5cGVfbmV3LWNhcmQnLCAoZGF0YUNhcmQpID0+IHtcclxuICAgICAgcG9wdXBBZGRDYXJkLmNoYW5nZUJ1dHRvblRleHQoJ9Ch0L7Qt9C00LDQvdC40LUuLi4nKTtcclxuICAgICAgYXBpLnBvc3ROZXdDYXJkKGRhdGFDYXJkLm5hbWUsIGRhdGFDYXJkLmxpbmspXHJcbiAgICAgICAgLnRoZW4oKGRhdGEpID0+IHsgXHJcbiAgICAgICAgICByZW5kZXJDYXJkcy5hZGRJdGVtKHJlbmRlckNhcmQoZGF0YSkpO1xyXG4gICAgICAgICAgcG9wdXBBZGRDYXJkLmNsb3NlKCk7XHJcbiAgICAgICAgICBwb3B1cEFkZENhcmQuY2hhbmdlQnV0dG9uVGV4dCgn0KHQvtC30LTQsNGC0YwnKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gICAgfSk7XHJcbiAgICBwb3B1cEFkZENhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICAvLy0tLS0tLS0tLS3QtNC+0LHQsNCy0LvQtdC90LjQtSDQtNCw0L3QvdGL0YUg0L/RgNC+0YTQuNC70Y8g0L3QsCDRgdC10YDQstC10YAtLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgY29uc3QgcG9wdXBVc2VyID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF90eXBlX2VkaXQnLCAodXNlckluZm8pID0+IHtcclxuICAgICAgcG9wdXBVc2VyLmNoYW5nZUJ1dHRvblRleHQoJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJyk7XHJcbiAgICAgIGFwaS5lZGl0VXNlckluZm8odXNlckluZm8ubmFtZSwgdXNlckluZm8uYWJvdXQpXHJcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgaGFuZGxlVXNlckluZm8odXNlckluZm8pO1xyXG4gICAgICAgICAgcG9wdXBVc2VyLmNsb3NlKCk7XHJcbiAgICAgICAgICBwb3B1cFVzZXIuY2hhbmdlQnV0dG9uVGV4dCgn0KHQvtGF0YDQsNC90LjRgtGMJyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICAgIH0pO1xyXG4gICAgcG9wdXBVc2VyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgLy8tLS0tLS0tLS0t0LTQvtCx0LDQstC70LXQvdC40LUg0LDQstCw0YLQsNGA0LrQuCDQv9GA0L7RhNC40LvRjyDQvdCwINGB0LXRgNCy0LXRgC0tLS0tLS0tLS0tLS0tLVxyXG4gICAgY29uc3QgcG9wdXBBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX3R5cGVfYXZhdGFyJywgKHVzZXJJbmZvKSA9PiB7XHJcbiAgICAgIHBvcHVwQXZhdGFyLmNoYW5nZUJ1dHRvblRleHQoJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJyk7XHJcbiAgICAgIGFwaS5lZGl0VXNlckF2YXRhcih1c2VySW5mby5hdmF0YXIpXHJcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgaGFuZGxlVXNlckF2YXRhcih1c2VySW5mbyk7XHJcbiAgICAgICAgICBwb3B1cEF2YXRhci5jbG9zZSgpO1xyXG4gICAgICAgICAgcG9wdXBBdmF0YXIuY2hhbmdlQnV0dG9uVGV4dCgn0KHQvtGF0YDQsNC90LjRgtGMJyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICAgIH0pO1xyXG4gICAgcG9wdXBBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICAvLy0tLS0tLS0tLS0tLS3RgdC70YPRiNCw0YLQtdC70LgtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgZWRpdFByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7IFxyXG4gICAgICBjb25zdCBjdXJyZW50VXNlckluZm8gPSB1c2VyRGF0YS5nZXRVc2VySW5mbygpOyAgICAgXHJcbiAgICAgIHVzZXJGb3JtLm5hbWUudmFsdWUgPSBjdXJyZW50VXNlckluZm8ubmFtZTtcclxuICAgICAgdXNlckZvcm0uYWJvdXQudmFsdWUgPSBjdXJyZW50VXNlckluZm8uYWJvdXQ7XHJcbiAgICAgIHVzZXJWYWxpZGF0ZS5yZXNldFZhbGlkYXRpb24oKTtcclxuICAgICAgcG9wdXBVc2VyLm9wZW4oKTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICBhZGRDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICBjYXJkVmFsaWRhdGUucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgICAgIHBvcHVwQWRkQ2FyZC5vcGVuKCk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgYXZhdGFyT3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgYXZhdGFyVmFsaWRhdGUucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgICAgIHBvcHVwQXZhdGFyLm9wZW4oKTtcclxuICAgIH0pO1xyXG5cclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gIH0pXHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS3QstCw0LvQuNC00LDRhtC40Y8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbmNvbnN0IHVzZXJWYWxpZGF0ZSA9IG5ldyBGb3JtVmFsaWRhdG9yKG9iaiwgdXNlckZvcm0pO1xyXG5jb25zdCBjYXJkVmFsaWRhdGUgPSBuZXcgRm9ybVZhbGlkYXRvcihvYmosIGNhcmRGb3JtKTtcclxuY29uc3QgYXZhdGFyVmFsaWRhdGUgPSBuZXcgRm9ybVZhbGlkYXRvcihvYmosIGF2YXRhckZvcm0pO1xyXG5cclxudXNlclZhbGlkYXRlLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuY2FyZFZhbGlkYXRlLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYXZhdGFyVmFsaWRhdGUuZW5hYmxlVmFsaWRhdGlvbigpOyJdLCJzb3VyY2VSb290IjoiIn0=